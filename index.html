
<!--width: 1852px;-->
<!--height: 964px;-->
<canvas id="canvas-593-a" width="1852px" height="964px" style="position: absolute;top: -1px;left: 0;display: block; margin: 0 auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb;width: 1852px;height: 964px;">
	No canvas support means no fun.
</canvas>


<canvas id="canvas-593" width="1024" height="640" style="position: absolute;top: -513px;left: 414px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-594" width="1024" height="640" style="position: absolute;top: -256px;left: -98px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-595" width="1024" height="640" style="position: absolute;top: 0px;left: -608px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb;">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-596" width="1024" height="640" style="position: absolute;top: -257px;left: 926px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-597" width="1024" height="640" style="display: block; margin: 200px auto; background: #fff; box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-598" width="1024" height="640" style="position: absolute;top: 257px;left: -98px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>

<canvas id="canvas-599" width="1024" height="640" style="position: absolute;top: 0px;left: 1435px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-600" width="1024" height="640" style="position: absolute;top: 257px;left: 924px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-601" width="1024" height="640" style="position: absolute;top: 514px;left: 413px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>


<!-- <canvas id="canvas-593" width="1024" height="640" style="position: absolute;top: -128px;left: 417px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>

<canvas id="canvas-594" width="1024" height="640" style="position: absolute;top: -64px;left: 288px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>

<canvas id="canvas-595" width="1024" height="640" style="position: absolute;top: 0px;left: 161px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb;">
	No canvas support means no fun.
</canvas>

<canvas id="canvas-596" width="1024" height="640" style="position: absolute;top: -64px;left: 546px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>
<canvas id="canvas-597" width="1024" height="640" style="display: block; margin: 200px auto; background: #fff; box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>

<canvas id="canvas-598" width="1024" height="640" style="position: absolute;top: 65px;left: 286px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>

<canvas id="canvas-599" width="1024" height="640" style="position: absolute;top: 0px;left: 673px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>



<canvas id="canvas-600" width="1024" height="640" style="position: absolute;top: 64px;left: 544px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas>

<canvas id="canvas-601" width="1024" height="640" style="position: absolute;top: 128px;left: 416px;display: block; margin: 200px auto;/*background: #fff;*/ box-shadow: none;; border: 0px solid #bbb">
	No canvas support means no fun.
</canvas> -->
<script src="scripts/KeyboardState.js"></script>
<script src="scripts/input.js"></script>
<script>
	// import {setupKeyboard} from './input.js';
// (function() {
	function useCanvas(canvasId) {
		var canvas = document.getElementById(canvasId);
		var cw = canvas.width;
		var ch = canvas.height;
		var interval = null;
		// isometric:
		var IsoW = 32; // cell width
		var IsoH = 16; // cell height
		var IsoX = cw / 2;
		var IsoY = (ch - IsoH * 32) / 2;

		let gridRows = Array.from(Array(16)).map(() => {
			return []
		})
		function IsoToScreenX(localX, localY) {
			return IsoX + (localX - localY) * IsoW;
		}
		function IsoToScreenY(localX, localY) {
			return IsoY + (localX + localY) * IsoH;
		}
		function ScreenToIsoX(globalX, globalY) {
			return ((globalX - IsoX) / IsoW + (globalY - IsoY) / IsoH) / 2;
		}
		function ScreenToIsoY(globalX, globalY) {
			return ((globalY - IsoY) / IsoH - (globalX - IsoX) / IsoW) / 2;
		}
		//
		function bind(id, onupdate) {
			var canvas = document.getElementById(id);
			var ctx = canvas.getContext("2d");
			var mouseX = canvas.width / 2, mouseY = canvas.height / 2;
			function update() {
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				ctx.save();
				onupdate(ctx, mouseX, mouseY);
				ctx.restore();
			}
			canvas.onmousemove = function(e) {
				mouseX = e.offsetX;
				mouseY = e.offsetY;
			}
			canvas.onmouseover = function(e) {
				if (interval == null) interval = setInterval(update, 50);
			}
			canvas.onmouseout = function(e) {
				if (interval != null) {
					clearInterval(interval);
					interval = null;
				}
			}
			onupdate(ctx, mouseX, mouseY);
		}
		bind(/*"canvas-597"*/ canvasId, function(ctx, mouseX, mouseY) {
			ctx.font = "11px sans-serif";
			//
			var rx = ScreenToIsoX(mouseX, mouseY);
			var ry = ScreenToIsoY(mouseX, mouseY);
			ctx.textAlign = "left";
			ctx.textBaseline = "top";
			if(canvasId === 'canvas-597') {
			// ctx.fillText("Mouse (absolute): " + mouseX + "," + mouseY, 3, 3);
			// ctx.fillText("Mouse (relative): " + rx.toFixed(2) + "," + ry.toFixed(2), 3, 15);
			}
			//
			ctx.strokeStyle = "#ddd";
			for (var i = 0; i <= 16; i++) {
				ctx.beginPath();
				ctx.moveTo(IsoToScreenX(0, i), IsoToScreenY(0, i));
				ctx.lineTo(IsoToScreenX(16, i), IsoToScreenY(16, i));
				ctx.moveTo(IsoToScreenX(i, 0), IsoToScreenY(i, 0));
				ctx.lineTo(IsoToScreenX(i, 16), IsoToScreenY(i, 16));
				ctx.closePath();
				ctx.stroke();
			}
			//
			if(canvasId === 'canvas-597') {
			rx = Math.max(0, Math.min(rx, 16));
			ry = Math.max(0, Math.min(ry, 16));
			ctx.strokeStyle = "red";
			ctx.beginPath();
			ctx.moveTo(IsoToScreenX(0, ry), IsoToScreenY(0, ry));
			ctx.lineTo(IsoToScreenX(16, ry), IsoToScreenY(16, ry));
			ctx.stroke();
			//
			ctx.strokeStyle = "blue";
			ctx.beginPath();
			ctx.moveTo(IsoToScreenX(rx, 0), IsoToScreenY(rx, 0));
			ctx.lineTo(IsoToScreenX(rx, 16), IsoToScreenY(rx, 16));
			ctx.stroke();
			}
			//
			ctx.textAlign = "center";
			ctx.textBaseline = "middle";
			for (var x = 0; x < 16; x++)
				for (var y = 0; y < 16; y++) {
					if(gridRows[y].length > 0) {
						// keep
					} else {
						gridRows[y] = []
					}
					gridRows[y].push({isoX: IsoToScreenX(x, y), isoY: IsoToScreenY(x, y) + IsoH})

					// ctx.fillText(x + "," + y, IsoToScreenX(x, y), IsoToScreenY(x, y) + IsoH);
				}
			//
		});
		var frame = 0.75;
		// bind("canvas-597-a", function(ctx, mouseX, mouseY) {
		// 	frame += 0.25;
		// 	if (frame > 96) frame = 0;
		// 	//
		// 	ctx.strokeStyle = "#ddd";
		// 	for (var i = 0; i <= 16; i++) {
		// 		ctx.beginPath();
		// 		ctx.moveTo(IsoToScreenX(0, i), IsoToScreenY(0, i));
		// 		ctx.lineTo(IsoToScreenX(16, i), IsoToScreenY(16, i));
		// 		ctx.moveTo(IsoToScreenX(i, 0), IsoToScreenY(i, 0));
		// 		ctx.lineTo(IsoToScreenX(i, 16), IsoToScreenY(i, 16));
		// 		ctx.closePath();
		// 		ctx.stroke();
		// 	}
		// 	//
		// 	var px = ~~ScreenToIsoX(mouseX, mouseY);
		// 	var py = ~~ScreenToIsoY(mouseX, mouseY);
		// 	function pdraw() {
		// 		pdone = true;
		// 		for (var iter = 0; iter < 2; iter++) {
		// 			ctx.fillStyle = iter ? "#ddd" : "#555";
		// 			ctx.beginPath();
		// 			ctx.arc(mouseX, mouseY - 16 + Math.sin(frame) * 4, 14 - iter * 2, 0, Math.PI * 2, false);
		// 			ctx.fill();
		// 		}
		// 	}
		// 	var i = 0;
		// 	for (var y = 0; y < 16; y++)
		// 	for (var x = 0; x < 16; x++) {
		// 		var ox = IsoToScreenX(x, y);
		// 		var ory = IsoToScreenY(x, y);
		// 		var oy = ory + Math.sin(frame + x + y / 2) * 4;
		// 		var oz = Math.min(1, frame - i) * 16;
		// 		if (px == x && py == y && mouseY < ory + 16) pdraw();
		// 		if (i < frame) for (var iter = 0; iter < 2; iter++) {
		// 			ctx.fillStyle = iter ? "#fff" : "#555";
		// 			ctx.beginPath();
		// 			ctx.arc(ox, oy, Math.max(1, oz - iter * 2), 0, Math.PI * 2, false);
		// 			ctx.fill();
		// 		}
		// 		if (px == x && py == y && mouseY >= ory + 16) pdraw();
		// 		i += 1;
		// 	}
		// });
		return {
			canvas: canvas,
			grid: gridRows,
			IsoH,
			IsoW
		}
	}
	useCanvas('canvas-593')

	useCanvas('canvas-594')
	useCanvas('canvas-595')

	useCanvas('canvas-596')

	let canvasDetails597 = useCanvas('canvas-597')
	let clientRect = canvasDetails597.canvas.getBoundingClientRect()
	console.log({top: clientRect.top, left: clientRect.left})


	// useCanvas('canvas-598')


	useCanvas('canvas-599')
	useCanvas('canvas-600')

	useCanvas('canvas-601')


	let fromCtx = function(/* keep ctx */) {

		return {
			useCtx: function(passdCtx) {
				ctx = passdCtx
			},
			moveTo: function(y, x) {
				return ctx.moveTo(x, y)
			},
			lineTo: function(y, x) {
				return ctx.lineTo(x, y)
			},
		}
	}
	let throughStacking = function(fromY) {
		// keep
		// calc(fromY /* keep */ + 20)
		return fromY
	}

	let constructKnotSample = function(knotConstructionFromStarting) {
		// keep
		for(let k = 0; k < knotConstructionFromStarting.slice(1).length; k++) {
			ctx.beginPath()
			ctx.strokeStyle = '#000'

			fromCtx(ctx).moveTo(knotConstructionFromStarting[k].fromY, knotConstructionFromStarting[k].fromX)
			fromCtx(ctx).lineTo(knotConstructionFromStarting[k+1].fromY, knotConstructionFromStarting[k+1].fromX)

			ctx.stroke()

			ctx.strokeStyle = '#000'

		}
		// ctx.stroke()
	}
	let calc = function(expression) {
		return expression
	}
	let PointerShift = function () {
		let pointer
		let pointerBelongings

		return {
			usePointer: function(pointerSample) {
				pointer = pointerSample
			},
			usePointerAnother: function(pointerBelongingsSample) {
				pointerBelongings = pointerBelongingsSample
			},

			fromPointerShift: function (fromPassd) {
				if(pointer.fromY > pointerBelongings.fromY &&
						pointerBelongings.fromX > pointer.fromX
				) {
					// keep
				}

				// keep
				let knotWi = calc(/* keep - */calc(pointerBelongings.fromX - pointer.fromX))
				// use sample
				let profile = calc(/* keep - */ calc(pointer.fromY - pointerBelongings.fromY))


				return {
					fromY: fromPassd.fromY - profile,
					fromX: fromPassd.fromX + knotWi
				}

				if(pointer.fromY > pointerBelongings.fromY &&
						pointerBelongings.fromX > pointer.fromX
				) {
					// keep

				} else {


					/* let */ knotWi = pointer.fromX > pointerBelongings.fromX ? calc(/* keep - */calc(pointer.fromX - pointerBelongings.fromX))
							: calc(pointerBelongings.fromX - pointer.fromX)
					// use sample
					/* let */ profile = pointerBelongings.fromY > pointer.fromY ? calc(/* keep - */ calc(pointerBelongings.fromY - pointer.fromY))
							: calc(pointer.fromY - pointerBelongings.fromY)

					return {
						fromY: fromPassd.fromY - profile,
						fromX: fromPassd.fromX + knotWi
					}
				}



				return {
					fromY: fromPassd.fromY - profile,
					fromX: fromPassd.fromX + knotWi
				}
			}
		}
	}


	let constructKnot = function(knotSample) {

		let strokeStyleFromOriginal = ctx.strokeStyle
		ctx.beginPath()
		ctx.strokeStyle = '#000'

		let [y0, x0] = [knotSample.fromBottomLeft.fromY, knotSample.fromBottomLeft.fromX]
		let [yFromBottomRight, xFromBottomRight] = [knotSample.fromBottomRight.fromY, knotSample.fromBottomRight.fromX]

		fromCtx(ctx).moveTo(throughStacking(y0), x0)
		fromCtx(ctx).lineTo(throughStacking(yFromBottomRight), xFromBottomRight)

		let [yFromTopRight, xFromTopRight] = [throughStacking(knotSample.fromTopRight.fromY), knotSample.fromTopRight.fromX]

		fromCtx(ctx).moveTo(throughStacking(yFromBottomRight), xFromBottomRight)
		fromCtx(ctx).lineTo(throughStacking(yFromTopRight), xFromTopRight)

		let [yFromTopLeft, xFromTopLeft] = [throughStacking(knotSample.fromTopLeft.fromY), knotSample.fromTopLeft.fromX]

		fromCtx(ctx).moveTo(throughStacking(yFromTopRight), xFromTopRight)
		fromCtx(ctx).lineTo(throughStacking(yFromTopLeft), xFromTopLeft)

		// keep
		fromCtx(ctx).moveTo(throughStacking(yFromTopLeft), xFromTopLeft)
		fromCtx(ctx).lineTo(throughStacking(y0), x0)

		ctx.stroke()

		ctx.strokeStyle = strokeStyleFromOriginal
	}
	window['constructKnotSample'] = constructKnotSample
	window['constructKnot'] = constructKnot
	window['PointerShift'] = PointerShift
	window['calc'] = calc

	let canvas = document.querySelector('#canvas-593-a')
	let ctx = canvas.getContext('2d')

	// constructKnot({
	// 	fromTopLeft: { fromY: 201, fromX: 418 },
	// 	fromTopRight: { fromY: 203, fromX: 1436 },
	// 	fromBottomRight: { fromY: 778, fromX: 1437 },
	// 	fromBottomLeft: { fromY: 778, fromX: 415 }
	// })


	let row = canvasDetails597.grid[0]
	let col = canvasDetails597.grid[0][0]
	let colSecond = canvasDetails597.grid[0][1]
	console.log({col, colSecond})

	let colRow1And0 = canvasDetails597.grid[1][0]
	let colRow1And1 = canvasDetails597.grid[1][1]

	console.log({
		IsoW: canvasDetails597.IsoW,
		IsoH: canvasDetails597.IsoH
	})

	let constructLine = (colSample, colAnother) => {
		constructKnotSample([
			{fromY: clientRect.top + colSample['isoY'], fromX: clientRect.left + colSample['isoX']},
			{fromY: clientRect.top + colAnother['isoY'], fromX: clientRect.left + colAnother['isoX'] }
		])
	}

	let constructRect = (pointerIntoPass) => {
		// pointerIntoPass = { fromY: 329, fromX: 831 }
		var IsoW = 32*0.5*0.5; // cell width
		var IsoH = 16*0.5*0.5; // cell height
		if(canvasDetails597.IsoH === 16 && canvasDetails597.IsoW === 32) {
			pointerShift = new PointerShift()
			pointerShift.usePointer({ fromY: 295, fromX: 897 })
			pointerShift.usePointerAnother({ fromY: clientRect.top + pointerIntoPass['isoY'], fromX: clientRect.left + pointerIntoPass['isoX'] })

			constructKnot({
				fromTopLeft: pointerShift.fromPointerShift({ fromY: 296, fromX: 882 }),
				fromTopRight: pointerShift.fromPointerShift({ fromY: 287, fromX: 896 }),
				fromBottomRight: pointerShift.fromPointerShift({ fromY: 295, fromX: 907 }),
				fromBottomLeft: pointerShift.fromPointerShift({ fromY: 302, fromX: 893 })
			})
			constructKnot({
				fromTopLeft: pointerShift.fromPointerShift({ fromY: 276, fromX: 889 }),
				fromTopRight: pointerShift.fromPointerShift({ fromY: 275, fromX: 900 }),
				fromBottomRight: pointerShift.fromPointerShift({ fromY: 296, fromX: 900 }),
				fromBottomLeft: pointerShift.fromPointerShift({ fromY: 295, fromX: 890 })
			})
			return
		}

		pointerShift = new PointerShift()
		pointerShift.usePointer(/*{ fromY: 295, fromX: 897 }*/{ fromY: 360, fromX: 731 })
		pointerShift.usePointerAnother({ fromY: clientRect.top + pointerIntoPass['isoY'], fromX: clientRect.left + pointerIntoPass['isoX'] })

		constructKnot({

			fromTopLeft: pointerShift.fromPointerShift({ fromY: 360, fromX: 727 }),
			fromTopRight: pointerShift.fromPointerShift({ fromY: 357, fromX: 733 }),
			fromBottomRight: pointerShift.fromPointerShift({ fromY: 359, fromX: 736 }),
			fromBottomLeft: pointerShift.fromPointerShift({ fromY: 363, fromX: 730 })

		})
		constructKnot({

			fromTopLeft: pointerShift.fromPointerShift({ fromY: 347, fromX: 729 }),
			fromTopRight: pointerShift.fromPointerShift({ fromY: 347, fromX: 732 }),
			fromBottomRight: pointerShift.fromPointerShift({ fromY: 359, fromX: 732 }),
			fromBottomLeft: pointerShift.fromPointerShift({ fromY: 359, fromX: 729 })

		})
	}


    /* const */ canvas = document.querySelector('#canvas-593-a');
    /* const */ ctx = canvas.getContext('2d');

	constructLine(col, colSecond)
	constructLine(colRow1And0, colRow1And1)
	constructLine(colRow1And1, colSecond)
	constructLine(col, colRow1And0)



	// context.drawImage(buffer, 20, 20, buffer.width, buffer.height, 20, 20, buffer.width, buffer.height)


	let colRow1And4 = canvasDetails597.grid[1][4]
	let colRow3And4 = canvasDetails597.grid[3][4]
	let colRow5And4 = canvasDetails597.grid[5][4]
	let colRow7And4 = canvasDetails597.grid[7][4]
	/* const */ canvas = document.querySelector('#canvas-593-a');
    /* const */ ctx = canvas.getContext('2d');

	// 4, 1 ; 4, 3;  4,5  4,7
	constructRect(colRow1And4)
	constructRect(colRow3And4)
	constructRect(colRow5And4)
	constructRect(colRow7And4)

	let colRow10And4 = canvasDetails597.grid[10][4]
	let colRow11And4 = canvasDetails597.grid[11][4]
	let colRow13And5 = canvasDetails597.grid[13][5]
	let colRow12And5 = canvasDetails597.grid[12][5]
	let colRow14And4 = canvasDetails597.grid[14][4]
	let colRow15And4 = canvasDetails597.grid[15][4]

	// 4, 10; 4,11; 5,13; 4,14; 4,15
	constructRect(colRow10And4)
	constructRect(colRow11And4)
	constructRect(colRow12And5)
	constructRect(colRow13And5)

	constructRect(colRow14And4)
	constructRect(colRow15And4)

	// 13,0; 13,3; 14,6; 14,9; 14,13; 14,15
	let colRow13And0 = canvasDetails597.grid[0][13]
	let colRow13And3 = canvasDetails597.grid[3][13]
	let colRow14And6 = canvasDetails597.grid[6][14]
	let colRow14And9 = canvasDetails597.grid[9][14]
	let colRow14And13 = canvasDetails597.grid[13][14]
	let colRow15And14 = canvasDetails597.grid[15][14]

	constructRect(colRow13And0)
	constructRect(colRow13And3)
	constructRect(colRow14And6)
	constructRect(colRow14And9)

	constructRect(colRow14And13)
	constructRect(colRow15And14)

	let canvasDetails598 = useCanvas('canvas-598')
	/* let */ clientRect = canvasDetails598.canvas.getBoundingClientRect()
	/* const */ canvas = document.querySelector('#canvas-593-a');
    /* const */ ctx = canvas.getContext('2d');

	// 14,4; 14,6; 14,8; 13,8; 12,8; 11,8
	/* let */ colRow14And4 = canvasDetails598.grid[4][14]
	/* let */ colRow14And6 = canvasDetails598.grid[6][14]
	/* let */ colRow14And8 = canvasDetails598.grid[8][14]
	/* let */ colRow13And8 = canvasDetails598.grid[8][13]
	/* let */ colRow12And8 = canvasDetails598.grid[8][12]
	/* let */ colRow11And8 = canvasDetails598.grid[8][11]

	constructRect(colRow14And4)
	constructRect(colRow14And6)
	constructRect(colRow14And8)
	constructRect(colRow13And8)

	constructRect(colRow12And8)
	constructRect(colRow11And8)

	// 11,8; 10,8;9,8;8,8;7,7;6,7;5,7;
	// 4,5;4,4;,4,3;,4,2;4,1;
	/* let */ colRow11And8 = canvasDetails598.grid[8][11]
	/* let */ colRow10And8 = canvasDetails598.grid[8][10]
	/* let */ colRow9And8 = canvasDetails598.grid[8][9]
	/* let */ colRow8And8 = canvasDetails598.grid[8][8]
	/* let */ colRow7And7 = canvasDetails598.grid[7][7]
	/* let */ colRow6And7 = canvasDetails598.grid[7][6]
	/* let */ colRow5And7 = canvasDetails598.grid[7][5]


	constructRect(colRow11And8)
	constructRect(colRow10And8)
	constructRect(colRow9And8)
	constructRect(colRow8And8)

	constructRect(colRow7And7)
	constructRect(colRow6And7)
	constructRect(colRow5And7)

	/* let */ colRow4And5 = canvasDetails598.grid[5][4]
	/* let */ colRow4And4 = canvasDetails598.grid[4][4]
	/* let */ colRow4And3 = canvasDetails598.grid[3][4]
	/* let */ colRow4And1 = canvasDetails598.grid[1][4]

	constructRect(colRow4And5)
	constructRect(colRow4And4)
	constructRect(colRow4And3)

	constructRect(colRow4And1)


	let canvasDetails596 = useCanvas('canvas-596')
	/* let */ clientRect = canvasDetails596.canvas.getBoundingClientRect()
	/* const */ canvas = document.querySelector('#canvas-593-a');
    /* const */ ctx = canvas.getContext('2d');

	// 2,0;2,3;2,5;3,7;3,9;3,11;3,12
	/* let */ colRow2And0 = canvasDetails596.grid[0][2]
	/* let */ colRow3And0 = canvasDetails596.grid[3][2]
	/* let */ colRow5And2 = canvasDetails596.grid[5][2]
	/* let */ colRow7And3 = canvasDetails596.grid[7][3]
	/* let */ colRow9And3 = canvasDetails596.grid[9][3]
	/* let */ colRow11And3 = canvasDetails596.grid[11][3]
	/* let */ colRow12And3 = canvasDetails596.grid[12][3]


	constructRect(colRow2And0)
	constructRect(colRow3And0)
	constructRect(colRow5And2)
	constructRect(colRow7And3)

	constructRect(colRow9And3)
	constructRect(colRow11And3)
	constructRect(colRow12And3)


	// 12,2;12,4;12,7;12,9;13,10;13,13

	/* let */ colRow2And12 = canvasDetails596.grid[2][12]
	/* let */ colRow4And12 = canvasDetails596.grid[4][12]
	/* let */ colRow7And12 = canvasDetails596.grid[7][12]
	/* let */ colRow9And12 = canvasDetails596.grid[9][12]
	/* let */ colRow9And13 = canvasDetails596.grid[9][13]
	/* let */ colRow10And13 = canvasDetails596.grid[10][13]
	/* let */ colRow13And13 = canvasDetails596.grid[13][13]


	constructRect(colRow2And12)
	constructRect(colRow4And12)
	constructRect(colRow7And12)
	constructRect(colRow9And12)

	constructRect(colRow9And13)
	constructRect(colRow10And13)
	constructRect(colRow13And13)


	// /* let */ colRow0And9 = canvasDetails596.grid[0][9]
	// /* let */ colRow0And7 = canvasDetails596.grid[0][7]
	// /* let */ colRow0And5 = canvasDetails596.grid[0][5]
	//
	// constructRect(colRow0And9)
	// constructRect(colRow0And7)
	// constructRect(colRow0And5)
	function moveLeft() {
		/* let */ canvas = document.getElementById('canvas-593-a')
		/* var */ ctx = canvas.getContext('2d');


		// create backing canvas
		var backCanvas = document.createElement('canvas');
		backCanvas.width = canvas.width;
		backCanvas.height = canvas.height;
		var backCtx = backCanvas.getContext('2d');

		// save main canvas contents
		backCtx.drawImage(canvas, 0,0);



		// restore main canvas
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		ctx.drawImage(backCanvas, -40, 0);
	}
	function moveRight() {
		/* let */ canvas = document.getElementById('canvas-593-a')
		/* var */ ctx = canvas.getContext('2d');


		// create backing canvas
		var backCanvas = document.createElement('canvas');
		backCanvas.width = canvas.width;
		backCanvas.height = canvas.height;
		var backCtx = backCanvas.getContext('2d');

		// save main canvas contents
		backCtx.drawImage(canvas, 0,0);



		// restore main canvas
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		ctx.drawImage(backCanvas, 40, 0);
	}
	function moveUp() {
		/* let */ canvas = document.getElementById('canvas-593-a')
		/* var */ ctx = canvas.getContext('2d');


		// create backing canvas
		var backCanvas = document.createElement('canvas');
		backCanvas.width = canvas.width;
		backCanvas.height = canvas.height;
		var backCtx = backCanvas.getContext('2d');

		// save main canvas contents
		backCtx.drawImage(canvas, 0,0);



		// restore main canvas
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		ctx.drawImage(backCanvas, 0, -40);
	}
	function moveBottom() {
		/* let */ canvas = document.getElementById('canvas-593-a')
		/* var */ ctx = canvas.getContext('2d');


		// create backing canvas
		var backCanvas = document.createElement('canvas');
		backCanvas.width = canvas.width;
		backCanvas.height = canvas.height;
		var backCtx = backCanvas.getContext('2d');

		// save main canvas contents
		backCtx.drawImage(canvas, 0,0);



		// restore main canvas
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		ctx.drawImage(backCanvas, 0, 40);
	}
	character = {
		moveLeft,
		moveRight,
		moveUp,
		moveBottom
	}

    const input = setupKeyboard(/*mario*/character);
    input.listenTo(window);


	document.querySelector('body').onclick = (event) => {
		console.log({fromY: event.clientY, fromX: event.clientX})
	}

// })();
</script>
